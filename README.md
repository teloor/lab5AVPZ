# ๐ฏ ะกะธััะตะผะฐ ะฃะฟัะฐะฒะปัะฝะฝั ะะธะทะธะบะฐะผะธ ะะพะทัะพะฑะบะธ ะะ

ะัะพัะพัะธะฟ ะฟัะพะณัะฐะผะฝะพะณะพ ะทะฐะฑะตะทะฟะตัะตะฝะฝั ะดะปั ัะฟัะฐะฒะปัะฝะฝั ัะธะทะธะบะฐะผะธ ัะพะทัะพะฑะบะธ ะฝะฐ ะพัะฝะพะฒั ะผะฐัะตะผะฐัะธัะฝะพั ะผะพะดะตะปั. ะะตะฐะปัะทัั ะฒัั 4 ะตัะฐะฟะธ: ะะดะตะฝัะธััะบะฐััั, ะะฝะฐะปัะท, ะะปะฐะฝัะฒะฐะฝะฝั ัะฐ ะะพะฝััะพัะธะฝะณ.

## ๐ ะะผััั

- [ะขะตัะฝะพะปะพะณััะฝะธะน ะกัะตะบ](#ัะตัะฝะพะปะพะณััะฝะธะน-ััะตะบ)
- [ะััััะตะบัััะฐ](#ะฐััััะตะบัััะฐ)
- [ะััะฐะฝะพะฒะปะตะฝะฝั](#ะฒััะฐะฝะพะฒะปะตะฝะฝั)
- [ะะฐะฟััะบ](#ะทะฐะฟััะบ)
- [ะะฐัะตะผะฐัะธัะฝะฐ ะะพะดะตะปั](#ะผะฐัะตะผะฐัะธัะฝะฐ-ะผะพะดะตะปั)
- [API ะะพะบัะผะตะฝัะฐััั](#api-ะดะพะบัะผะตะฝัะฐััั)
- [ะัะธะบะปะฐะด ะะพะฑะพัะธ](#ะฟัะธะบะปะฐะด-ัะพะฑะพัะธ)

## ๐ ะขะตัะฝะพะปะพะณััะฝะธะน ะกัะตะบ

- **Backend**: Node.js ะท Express.js ะดะปั REST API
- **Frontend**: HTML/CSS/Vanilla JavaScript
- **ะคะพัะผะฐั ะดะฐะฝะธั**: JSON
- **ะะพัั ะทะฐ ะทะฐะผะพะฒััะฒะฐะฝะฝัะผ**: 3000

## ๐ ะััััะตะบัััะฐ

ะกะธััะตะผะฐ ะฟะพะฑัะดะพะฒะฐะฝะฐ ะทะฐ ะฐััััะตะบัััะพั Client-Server ะท REST API:

```
โโโโโโโโโโโโโโโโโโโโโโโ
โ   Frontend (Web)    โ
โ   HTML/CSS/JS       โ
โโโโโโโโโโโโฌโโโโโโโโโโโ
           โ HTTP/JSON
           โผ
โโโโโโโโโโโโโโโโโโโโโโโ
โ   Express Server    โ
โ   REST API          โ
โโโโโโโโโโโโฌโโโโโโโโโโโ
           โ
           โผ
โโโโโโโโโโโโโโโโโโโโโโโ
โ  Calculations.js    โ
โ  ะะฐัะตะผะฐัะธัะฝะฐ ะผะพะดะตะปั โ
โโโโโโโโโโโโโโโโโโโโโโโ
           โ
           โผ
โโโโโโโโโโโโโโโโโโโโโโโ
โ   Data (JSON)       โ
โ   - Risk Sources    โ
โ   - Risk Events     โ
โ   - Measures        โ
โโโโโโโโโโโโโโโโโโโโโโโ
```

### ะกัััะบัััะฐ ะฟัะพัะบัั:

```
lab5AVPZ/
โโโ server.js              # Express ัะตัะฒะตั ะท REST API
โโโ calculations.js        # ะะพะดัะปั ัะพะทัะฐััะฝะบัะฒ
โโโ package.json          # ะะฐะปะตะถะฝะพััั Node.js
โโโ data/                 # ะะฐัะฐะปะพะณะธ ะดะฐะฝะธั
โ   โโโ riskSources.json     # 18 ะดะถะตัะตะป ัะธะทะธะบัะฒ
โ   โโโ riskEvents.json      # 46 ัะธะทะธะบะพะฒะธั ะฟะพะดัะน
โ   โโโ mitigationMeasures.json  # 19 ะทะฐัะพะดัะฒ
โโโ public/               # ะกัะฐัะธัะฝั ัะฐะนะปะธ ััะพะฝัะตะฝะดั
โ   โโโ index.html           # ะะตะฑ-ัะฝัะตััะตะนั
โ   โโโ styles.css           # ะกัะธะปั
โ   โโโ app.js               # Frontend JavaScript
โโโ README.md             # ะฆั ะดะพะบัะผะตะฝัะฐััั
โโโ ARCHITECTURE.md       # ะะตัะฐะปัะฝะฐ ะฐััััะตะบัััะฐ
โโโ EXAMPLE_TRACE.md      # ะัะธะบะปะฐะด ัะพะฑะพัะธ
```

## ๐ฆ ะััะฐะฝะพะฒะปะตะฝะฝั

1. ะะปะพะฝัะนัะต ัะตะฟะพะทะธัะพััะน:
```bash
git clone https://github.com/teloor/lab5AVPZ.git
cd lab5AVPZ
```

2. ะััะฐะฝะพะฒััั ะทะฐะปะตะถะฝะพััั:
```bash
npm install
```

## ๐ ะะฐะฟััะบ

ะะฐะฟัััััั ัะตัะฒะตั:
```bash
npm start
```

ะกะตัะฒะตั ะทะฐะฟัััะธัััั ะฝะฐ `http://localhost:3000`

ะัะดะบัะธะนัะต ะฒะตะฑ-ัะฝัะตััะตะนั: `http://localhost:3000`

## ๐ ะะฐัะตะผะฐัะธัะฝะฐ ะะพะดะตะปั

### ะัะฐะฟ 1: ะะดะตะฝัะธััะบะฐััั ะะธะทะธะบัะฒ

#### 1.1. ะะพะทัะฐััะฝะพะบ ะนะผะพะฒััะฝะพััะตะน ะณััะฟ ะดะถะตัะตะป:

```
t_c^RS = (1/18) * ฮฃ(t_j^RS)  ะดะปั j=1..7
c_c^RS = (1/18) * ฮฃ(c_j^RS)  ะดะปั j=1..3
p_c^RS = (1/18) * ฮฃ(p_j^RS)  ะดะปั j=1..3
m_c^RS = (1/18) * ฮฃ(m_j^RS)  ะดะปั j=1..5
```

#### 1.2. ะกัะผะฐัะฝะธะน ัะธะทะธะบ:

```
R_ฮฃ^RS = t_c^RS + c_c^RS + p_c^RS + m_c^RS
```

### ะัะฐะฟ 2: ะะฝะฐะปัะท ะะธะทะธะบัะฒ

#### 2.1. ะะผะพะฒััะฝัััั ะท ะฒะฐะณะฐะผะธ ะตะบัะฟะตัััะฒ:

```
er_i^p = ฮฃ(per_ij^p * weight_j) / ฮฃ(weight_j)
```

ะะฑะพ ะฑะตะท ะฒะฐะณ (ะฑะฐะทะพะฒะธะน):
```
er_i^p = (1/10) * ฮฃ(per_ij^p)  ะดะปั j=1..10
```

#### 2.2. ะะฑะธัะบะธ (ะฐะฝะฐะปะพะณััะฝะพ):

```
lrer_i^p = ฮฃ(lrer_ij^p * weight_j) / ฮฃ(weight_j)
```

#### 2.3. ะะตะปะธัะธะฝะฐ ัะธะทะธะบั:

```
vrer_i^p = er_i^p * lrer_i^p
```

#### 2.4. ะััะพัะธัะตะทะฐััั:

```
mpr = (max - min) / 3

ะะธะทัะบะธะน:    min โค vrer_i^p < min + mpr
ะกะตัะตะดะฝัะน:   min + mpr โค vrer_i^p < min + 2*mpr
ะะธัะพะบะธะน:    min + 2*mpr โค vrer_i^p โค max
```

### ะัะฐะฟ 3: ะะปะฐะฝัะฒะฐะฝะฝั

ะัะธะทะฝะฐัะตะฝะฝั ะพะดะฝะพะณะพ ะท 19 ะทะฐัะพะดัะฒ ะดะปั ะบะพะถะฝะพะณะพ ัะธะทะธะบั.

### ะัะฐะฟ 4: ะะพะฝััะพัะธะฝะณ

#### 4.1. ะะพะฒะฐ ะฒะตะปะธัะธะฝะฐ ัะธะทะธะบั ะฟััะปั ะทะฐัะพะดั:

```
evrer_i^p = eprer_i^p * elrer_i^p
```

#### 4.2. ะะผะตะฝัะตะฝะฝั ัะธะทะธะบั:

```
reduction = vrer_i^p - evrer_i^p
reductionPercentage = (reduction / vrer_i^p) * 100%
```

## ๐ API ะะพะบัะผะตะฝัะฐััั

### ะัะฐะฟ 1: ะะดะตะฝัะธััะบะฐััั

#### GET /api/risk-sources
ะััะธะผะฐัะธ ะบะฐัะฐะปะพะณ ะดะถะตัะตะป ัะธะทะธะบัะฒ (18 ะดะถะตัะตะป).

#### POST /api/risk-sources
ะะฝะพะฒะธัะธ ััะฐะฝ ะดะถะตัะตะป ัะฐ ัะพะทัะฐััะฒะฐัะธ ะนะผะพะฒััะฝะพััั.

**Body:**
```json
{
  "technical": { "risks": [...] },
  "cost": { "risks": [...] },
  "schedule": { "risks": [...] },
  "management": { "risks": [...] }
}
```

**Response:**
```json
{
  "probabilities": {
    "t_c_RS": 0.1111,
    "c_c_RS": 0.0556,
    "p_c_RS": 0.0556,
    "m_c_RS": 0.0556,
    "R_sum_RS": 0.2778
  }
}
```

#### GET /api/risk-events
ะััะธะผะฐัะธ ะบะฐัะฐะปะพะณ ัะธะทะธะบะพะฒะธั ะฟะพะดัะน (46 ะฟะพะดัะน).

#### POST /api/risk-events/select
ะะธะฑัะฐัะธ ัะตะปะตะฒะฐะฝัะฝั ะฟะพะดัั.

**Body:**
```json
{
  "selectedEvents": ["t1", "c1", "p2", "m5"]
}
```

### ะัะฐะฟ 2: ะะฝะฐะปัะท

#### POST /api/analyze-risk
ะัะพะฐะฝะฐะปัะทัะฒะฐัะธ ะบะพะฝะบัะตัะฝะธะน ัะธะทะธะบ.

**Body:**
```json
{
  "riskId": "t1",
  "expertProbabilities": [0.5, 0.6, 0.5, 0.7, 0.5, 0.6, 0.5, 0.6, 0.5, 0.6],
  "expertLosses": [0.4, 0.5, 0.4, 0.6, 0.4, 0.5, 0.4, 0.5, 0.4, 0.5],
  "expertWeights": [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
}
```

**Response:**
```json
{
  "riskId": "t1",
  "probability": 0.55,
  "loss": 0.46,
  "magnitude": 0.253,
  "classification": "ะะธัะพะบะฐ"
}
```

#### POST /api/prioritize-risks
ะะฐะฝะถัะฒะฐัะธ ะฒัั ะฟัะพะฐะฝะฐะปัะทะพะฒะฐะฝั ัะธะทะธะบะธ.

### ะัะฐะฟ 3: ะะปะฐะฝัะฒะฐะฝะฝั

#### GET /api/mitigation-measures
ะััะธะผะฐัะธ ะบะฐัะฐะปะพะณ ะทะฐัะพะดัะฒ (19 ะทะฐัะพะดัะฒ).

#### POST /api/assign-mitigation
ะัะธะทะฝะฐัะธัะธ ะทะฐััะด ะดะปั ัะธะทะธะบั.

**Body:**
```json
{
  "riskId": "t1",
  "measureId": "ev8"
}
```

### ะัะฐะฟ 4: ะะพะฝััะพัะธะฝะณ

#### POST /api/monitor-risk
ะััะฝะธัะธ ะตัะตะบัะธะฒะฝัััั ะทะฐัะพะดั.

**Body:**
```json
{
  "riskId": "t1",
  "newExpertProbabilities": [0.3, 0.4, 0.3, 0.5, 0.3, 0.4, 0.3, 0.4, 0.3, 0.4],
  "newExpertLosses": [0.2, 0.3, 0.2, 0.4, 0.2, 0.3, 0.2, 0.3, 0.2, 0.3],
  "expertWeights": [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
}
```

**Response:**
```json
{
  "comparison": {
    "before": {
      "probability": 0.55,
      "loss": 0.46,
      "magnitude": 0.253
    },
    "after": {
      "probability": 0.35,
      "loss": 0.26,
      "magnitude": 0.091
    },
    "reduction": 0.162,
    "reductionPercentage": 64.03,
    "improved": true
  }
}
```

## ๐ ะัะธะบะปะฐะด ะะพะฑะพัะธ

ะะธะฒััััั ะดะตัะฐะปัะฝะธะน trace-ะฟัะธะบะปะฐะด ั ัะฐะนะปั [EXAMPLE_TRACE.md](EXAMPLE_TRACE.md), ัะบะธะน ะฟะพะบะฐะทัั ะฟะพะบัะพะบะพะฒะต ะฒะธะบะพะฝะฐะฝะฝั ัะธะทะธะบั t1 ัะตัะตะท ะฒัั 4 ะตัะฐะฟะธ.

## ๐ ะะตัะธััะบะฐััั

ะัั ัะพะทัะฐััะฝะบะธ ะฒ ัะธััะตะผั ัะพัะฝะพ ะฒัะดะฟะพะฒัะดะฐััั ะผะฐัะตะผะฐัะธัะฝะธะผ ัะพัะผัะปะฐะผ, ะฝะฐะดะฐะฝะธะผ ั ะฒะธะผะพะณะฐั. ะะปััะพะฒั ััะฝะบััั ัะพะทัะฐััะฝะบัะฒ ะทะฝะฐัะพะดััััั ะฒ ะผะพะดัะปั `calculations.js`:

- `calculateRiskSourceProbabilities()` - ะัะฐะฟ 1
- `analyzeRisk()` - ะัะฐะฟ 2
- `prioritizeRisks()` - ะัะฐะฟ 2.4
- `compareRisks()` - ะัะฐะฟ 4

## ๐ ะััะตะฝะทัั

ISC

## ๐จโ๐ป ะะฒัะพั

ะะพะทัะพะฑะปะตะฝะพ ัะบ ะปะฐะฑะพัะฐัะพัะฝะฐ ัะพะฑะพัะฐ ะดะปั ะบัััั AVPZ.
