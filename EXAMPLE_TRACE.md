# üìä –ü—Ä–∏–∫–ª–∞–¥ –†–æ–±–æ—Ç–∏ –°–∏—Å—Ç–µ–º–∏ (Trace)

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –ø–æ–∫–∞–∑—É—î –ø–æ–∫—Ä–æ–∫–æ–≤–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ä–∏–∑–∏–∫—É **t1 (–∑–∞—Ç—Ä–∏–º–∫–∏ —É –ø–æ—Å—Ç–∞—á–∞–Ω–Ω—ñ –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è)** —á–µ—Ä–µ–∑ –≤—Å—ñ 4 –µ—Ç–∞–ø–∏ —Å–∏—Å—Ç–µ–º–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ä–∏–∑–∏–∫–∞–º–∏ –∑ —Ä–µ–∞–ª—å–Ω–∏–º–∏ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–∞–º–∏.

## –ü–æ—á–∞—Ç–∫–æ–≤—ñ —É–º–æ–≤–∏

- –†–∏–∑–∏–∫: **t1** - "–∑–∞—Ç—Ä–∏–º–∫–∏ —É –ø–æ—Å—Ç–∞—á–∞–Ω–Ω—ñ –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è"
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å –µ–∫—Å–ø–µ—Ä—Ç—ñ–≤: 10
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤–∞–≥ –µ–∫—Å–ø–µ—Ä—Ç—ñ–≤: –¢–∞–∫

---

## –ï–¢–ê–ü 1: –Ü–î–ï–ù–¢–ò–§–Ü–ö–ê–¶–Ü–Ø –†–ò–ó–ò–ö–Ü–í

### 1.1. –Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –î–∂–µ—Ä–µ–ª –†–∏–∑–∏–∫—ñ–≤

**–í—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ:**
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤—ñ–¥–º—ñ—á–∞—î –¥–∂–µ—Ä–µ–ª–∞ —Ä–∏–∑–∏–∫—ñ–≤, —è–∫—ñ –ø—Ä–∏—Å—É—Ç–Ω—ñ –≤ –ø—Ä–æ—î–∫—Ç—ñ:

```json
{
  "technical": {
    "risks": [
      {"id": "t1", "name": "—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ü–ó", "value": 1},
      {"id": "t2", "name": "—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —è–∫–æ—Å—Ç—ñ –ü–ó", "value": 1},
      {"id": "t3", "name": "—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –Ω–∞–¥—ñ–π–Ω–æ—Å—Ç—ñ –ü–ó", "value": 0},
      {"id": "t4", "name": "–∑–∞—Å—Ç–æ—Å–æ–≤–Ω—ñ—Å—Ç—å –ü–ó", "value": 0},
      {"id": "t5", "name": "—á–∞—Å–æ–≤–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –ü–ó", "value": 0},
      {"id": "t6", "name": "—Å—É–ø—Ä–æ–≤–æ–¥–∂—É–≤–∞–Ω—ñ—Å—Ç—å –ü–ó", "value": 0},
      {"id": "t7", "name": "–ø–æ–≤—Ç–æ—Ä–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ü–ó", "value": 0}
    ]
  },
  "cost": {
    "risks": [
      {"id": "c1", "name": "–æ–±–º–µ–∂–µ–Ω–Ω—è —Å—É–º–∞—Ä–Ω–æ–≥–æ –±—é–¥–∂–µ—Ç—É", "value": 1},
      {"id": "c2", "name": "–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó", "value": 0},
      {"id": "c3", "name": "–Ω–∏–∑—å–∫–∞ —Å—Ç—É–ø—ñ–Ω—å —Ä–µ–∞–ª—ñ–∑–º—É –ø—Ä–∏ –æ—Ü—ñ–Ω—é–≤–∞–Ω–Ω—ñ –≤–∏—Ç—Ä–∞—Ç", "value": 0}
    ]
  },
  "schedule": {
    "risks": [
      {"id": "p1", "name": "–≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –≥–Ω—É—á–∫–æ—Å—Ç—ñ –≤–Ω–µ—Å–µ–Ω–Ω—è –∑–º—ñ–Ω –¥–æ –ø–ª–∞–Ω—ñ–≤", "value": 0},
      {"id": "p2", "name": "–º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –ø–æ—Ä—É—à–µ–Ω–Ω—è —Ç–µ—Ä–º—ñ–Ω—ñ–≤", "value": 1},
      {"id": "p3", "name": "–Ω–∏–∑—å–∫–∞ —Å—Ç—É–ø—ñ–Ω—å —Ä–µ–∞–ª—ñ–∑–º—É –ø—Ä–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ñ –ø–ª–∞–Ω—ñ–≤", "value": 0}
    ]
  },
  "management": {
    "risks": [
      {"id": "m1", "name": "—Ö–∏–±–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó", "value": 0},
      {"id": "m2", "name": "–Ω–µ–µ—Ñ–µ–∫—Ç–∏–≤–Ω–µ –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è", "value": 0},
      {"id": "m3", "name": "–Ω–µ—è–∫—ñ—Å–Ω–µ –æ—Ü—ñ–Ω—é–≤–∞–Ω–Ω—è", "value": 1},
      {"id": "m4", "name": "–ø—Ä–æ–≥–∞–ª–∏–Ω–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç—É–≤–∞–Ω–Ω—ñ", "value": 0},
      {"id": "m5", "name": "–ø—Ä–æ–º–∞—Ö–∏ –≤ –ø—Ä–æ–≥–Ω–æ–∑—É–≤–∞–Ω–Ω—ñ", "value": 0}
    ]
  }
}
```

**–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ (—Ñ—É–Ω–∫—Ü—ñ—è `calculateRiskSourceProbabilities`):**

```javascript
// –¢–µ—Ö–Ω—ñ—á–Ω—ñ —Ä–∏–∑–∏–∫–∏: t1=1, t2=1, —ñ–Ω—à—ñ=0 ‚Üí —Å—É–º–∞=2
t_c^RS = (1/18) * (1 + 1 + 0 + 0 + 0 + 0 + 0) = 2/18 = 0.1111

// –í–∞—Ä—Ç—ñ—Å–Ω—ñ —Ä–∏–∑–∏–∫–∏: c1=1, —ñ–Ω—à—ñ=0 ‚Üí —Å—É–º–∞=1
c_c^RS = (1/18) * (1 + 0 + 0) = 1/18 = 0.0556

// –ü–ª–∞–Ω–æ–≤—ñ —Ä–∏–∑–∏–∫–∏: p2=1, —ñ–Ω—à—ñ=0 ‚Üí —Å—É–º–∞=1
p_c^RS = (1/18) * (0 + 1 + 0) = 1/18 = 0.0556

// –†–∏–∑–∏–∫–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è: m3=1, —ñ–Ω—à—ñ=0 ‚Üí —Å—É–º–∞=1
m_c^RS = (1/18) * (0 + 0 + 1 + 0 + 0) = 1/18 = 0.0556

// –°—É–º–∞—Ä–Ω–∏–π —Ä–∏–∑–∏–∫
R_Œ£^RS = 0.1111 + 0.0556 + 0.0556 + 0.0556 = 0.2778
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "t_c_RS": 0.1111,
  "c_c_RS": 0.0556,
  "p_c_RS": 0.0556,
  "m_c_RS": 0.0556,
  "R_sum_RS": 0.2778
}
```

‚úÖ **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:** –°—É–º–∞ (2+1+1+1)/18 = 5/18 = 0.2778 ‚úì

### 1.2. –Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ü–æ–¥—ñ–π –†–∏–∑–∏–∫—É

**–í—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ:**
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∏–±–∏—Ä–∞—î —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ —Ä–∏–∑–∏–∫–æ–≤—ñ –ø–æ–¥—ñ—ó:

```json
{
  "selectedEvents": ["t1", "c1", "p2", "m5"]
}
```

**API –∑–∞–ø–∏—Ç:**
```
POST /api/risk-events/select
Body: {"selectedEvents": ["t1", "c1", "p2", "m5"]}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "selectedEvents": ["t1", "c1", "p2", "m5"],
  "count": 4
}
```

‚úÖ **–ï—Ç–∞–ø 1 –∑–∞–≤–µ—Ä—à–µ–Ω–æ:** –Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–æ–≤–∞–Ω–æ 4 —Ä–∏–∑–∏–∫–æ–≤—ñ –ø–æ–¥—ñ—ó –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É.

---

## –ï–¢–ê–ü 2: –ê–ù–ê–õ–Ü–ó –†–ò–ó–ò–ö–Ü–í

### 2.1. –ï–∫—Å–ø–µ—Ä—Ç–Ω–µ –û—Ü—ñ–Ω—é–≤–∞–Ω–Ω—è –†–∏–∑–∏–∫—É t1

**–í—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ:**

10 –µ–∫—Å–ø–µ—Ä—Ç—ñ–≤ –Ω–∞–¥–∞—é—Ç—å –æ—Ü—ñ–Ω–∫–∏ –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ —Ç–∞ –∑–±–∏—Ç–∫—ñ–≤ (–≤—ñ–¥ 0 –¥–æ 1):

```json
{
  "riskId": "t1",
  "expertProbabilities": [0.6, 0.7, 0.5, 0.8, 0.6, 0.7, 0.5, 0.7, 0.6, 0.7],
  "expertLosses": [0.5, 0.6, 0.4, 0.7, 0.5, 0.6, 0.4, 0.6, 0.5, 0.6],
  "expertWeights": [1.0, 1.2, 0.8, 1.5, 1.0, 1.2, 0.8, 1.2, 1.0, 1.2]
}
```

**–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ –∑ –≤–∞–≥–∞–º–∏ (—Ñ—É–Ω–∫—Ü—ñ—è `calculateWeightedProbability`):**

```javascript
// –°–µ—Ä–µ–¥–Ω—å–æ–∑–≤–∞–∂–µ–Ω–µ
weightedSum = (0.6*1.0 + 0.7*1.2 + 0.5*0.8 + 0.8*1.5 + 0.6*1.0 + 
               0.7*1.2 + 0.5*0.8 + 0.7*1.2 + 0.6*1.0 + 0.7*1.2)

weightedSum = 0.6 + 0.84 + 0.4 + 1.2 + 0.6 + 0.84 + 0.4 + 0.84 + 0.6 + 0.84 = 7.16

weightSum = 1.0 + 1.2 + 0.8 + 1.5 + 1.0 + 1.2 + 0.8 + 1.2 + 1.0 + 1.2 = 10.9

er_t1^p = 7.16 / 10.9 = 0.6569
```

**–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –∑–±–∏—Ç–∫—ñ–≤ –∑ –≤–∞–≥–∞–º–∏ (—Ñ—É–Ω–∫—Ü—ñ—è `calculateWeightedLoss`):**

```javascript
weightedSum = (0.5*1.0 + 0.6*1.2 + 0.4*0.8 + 0.7*1.5 + 0.5*1.0 + 
               0.6*1.2 + 0.4*0.8 + 0.6*1.2 + 0.5*1.0 + 0.6*1.2)

weightedSum = 0.5 + 0.72 + 0.32 + 1.05 + 0.5 + 0.72 + 0.32 + 0.72 + 0.5 + 0.72 = 6.07

lrer_t1^p = 6.07 / 10.9 = 0.5569
```

**–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –≤–µ–ª–∏—á–∏–Ω–∏ —Ä–∏–∑–∏–∫—É (—Ñ—É–Ω–∫—Ü—ñ—è `calculateRiskMagnitude`):**

```javascript
vrer_t1^p = er_t1^p * lrer_t1^p = 0.6569 * 0.5569 = 0.3658
```

**–ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ (—Ñ—É–Ω–∫—Ü—ñ—è `classifyProbability`):**

```javascript
// 0.6569 >= 0.5 —Ç–∞ < 0.75
classification = "–í–∏—Å–æ–∫–∞"
```

**API –∑–∞–ø–∏—Ç:**
```
POST /api/analyze-risk
Body: {–≤—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ –≤–∏—â–µ}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "riskId": "t1",
  "probability": 0.6569,
  "loss": 0.5569,
  "magnitude": 0.3658,
  "classification": "–í–∏—Å–æ–∫–∞"
}
```

‚úÖ **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:** 0.6569 * 0.5569 = 0.3658 ‚úì

### 2.2. –ê–Ω–∞–ª—ñ–∑ —ñ–Ω—à–∏—Ö —Ä–∏–∑–∏–∫—ñ–≤ (—Å–∫–æ—Ä–æ—á–µ–Ω–æ)

–ê–Ω–∞–ª–æ–≥—ñ—á–Ω–∏–º —á–∏–Ω–æ–º –∞–Ω–∞–ª—ñ–∑—É—î–º–æ —ñ–Ω—à—ñ —Ä–∏–∑–∏–∫–∏:

**c1** (—Ñ—ñ–Ω–∞–Ω—Å–æ–≤—ñ —É—Å–∫–ª–∞–¥–Ω–µ–Ω–Ω—è):
- –ô–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å: 0.4500
- –ó–±–∏—Ç–∫–∏: 0.8000
- –í–µ–ª–∏—á–∏–Ω–∞: 0.3600
- –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è: "–°–µ—Ä–µ–¥–Ω—è"

**p2** (–ø–æ—Ä—É—à–µ–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫–∞):
- –ô–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å: 0.5200
- –ó–±–∏—Ç–∫–∏: 0.6500
- –í–µ–ª–∏—á–∏–Ω–∞: 0.3380
- –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è: "–í–∏—Å–æ–∫–∞"

**m5** (–Ω–µ–∑–∞–¥–æ–≤–æ–ª–µ–Ω—ñ—Å—Ç—å –∑–∞–º–æ–≤–Ω–∏–∫–∞):
- –ô–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å: 0.3800
- –ó–±–∏—Ç–∫–∏: 0.7200
- –í–µ–ª–∏—á–∏–Ω–∞: 0.2736
- –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è: "–°–µ—Ä–µ–¥–Ω—è"

### 2.3. –ü—Ä—ñ–æ—Ä–∏—Ç–µ–∑–∞—Ü—ñ—è (—Ñ—É–Ω–∫—Ü—ñ—è `prioritizeRisks`)

**–í—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ:** –ú–∞—Å–∏–≤ –≤–µ–ª–∏—á–∏–Ω —Ä–∏–∑–∏–∫—ñ–≤

```javascript
risks = [
  {riskId: "t1", magnitude: 0.3658},
  {riskId: "c1", magnitude: 0.3600},
  {riskId: "p2", magnitude: 0.3380},
  {riskId: "m5", magnitude: 0.2736}
]
```

**–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫:**

```javascript
// –ó–Ω–∞—Ö–æ–¥–∏–º–æ max —Ç–∞ min
max = 0.3658
min = 0.2736

// –û–±—á–∏—Å–ª—é—î–º–æ –∫—Ä–æ–∫ —ñ–Ω—Ç–µ—Ä–≤–∞–ª—É
mpr = (0.3658 - 0.2736) / 3 = 0.0922 / 3 = 0.0307

// –ü–æ—Ä–æ–≥–∏ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—ñ–≤
lowThreshold = min + mpr = 0.2736 + 0.0307 = 0.3043
highThreshold = min + 2*mpr = 0.2736 + 0.0614 = 0.3350

// –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—ñ–≤:
// t1: 0.3658 >= 0.3350 ‚Üí –í–∏—Å–æ–∫–∏–π
// c1: 0.3600 >= 0.3350 ‚Üí –í–∏—Å–æ–∫–∏–π
// p2: 0.3380 >= 0.3350 ‚Üí –í–∏—Å–æ–∫–∏–π
// m5: 0.2736 < 0.3043 ‚Üí –ù–∏–∑—å–∫–∏–π
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç (–≤—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω–æ –∑–∞ –≤–µ–ª–∏—á–∏–Ω–æ—é):**

```json
{
  "risks": [
    {
      "riskId": "t1",
      "magnitude": 0.3658,
      "priority": "–í–∏—Å–æ–∫–∏–π",
      "priorityThresholds": {
        "min": 0.2736,
        "max": 0.3658,
        "mpr": 0.0307,
        "lowThreshold": 0.3043,
        "highThreshold": 0.3350
      }
    },
    {
      "riskId": "c1",
      "magnitude": 0.3600,
      "priority": "–í–∏—Å–æ–∫–∏–π"
    },
    {
      "riskId": "p2",
      "magnitude": 0.3380,
      "priority": "–í–∏—Å–æ–∫–∏–π"
    },
    {
      "riskId": "m5",
      "magnitude": 0.2736,
      "priority": "–ù–∏–∑—å–∫–∏–π"
    }
  ]
}
```

‚úÖ **–ï—Ç–∞–ø 2 –∑–∞–≤–µ—Ä—à–µ–Ω–æ:** –†–∏–∑–∏–∫ t1 –æ—Ç—Ä–∏–º–∞–≤ –Ω–∞–π–≤–∏—â—É –≤–µ–ª–∏—á–∏–Ω—É (0.3658) —Ç–∞ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç "–í–∏—Å–æ–∫–∏–π".

---

## –ï–¢–ê–ü 3: –ü–õ–ê–ù–£–í–ê–ù–ù–Ø –†–ò–ó–ò–ö–Ü–í

### 3.1. –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ó–∞—Ö–æ–¥—É –¥–ª—è –†–∏–∑–∏–∫—É t1

**–í–∏–±—ñ—Ä –∑–∞—Ö–æ–¥—É:**
–ù–∞ –æ—Å–Ω–æ–≤—ñ –∞–Ω–∞–ª—ñ–∑—É –æ–±–∏—Ä–∞—î–º–æ –∑–∞—Ö—ñ–¥ **ev8** - "—Ç—Ä–µ–Ω—ñ–Ω–≥ –∑ –≤–∏–≤—á–µ–Ω–Ω—è —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–Ω—è"

**API –∑–∞–ø–∏—Ç:**
```
POST /api/assign-mitigation
Body: {
  "riskId": "t1",
  "measureId": "ev8"
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "riskId": "t1",
  "measureId": "ev8",
  "measureName": "—Ç—Ä–µ–Ω—ñ–Ω–≥ –∑ –≤–∏–≤—á–µ–Ω–Ω—è —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–Ω—è",
  "assignedAt": "2024-01-15T10:30:00.000Z"
}
```

‚úÖ **–ï—Ç–∞–ø 3 –∑–∞–≤–µ—Ä—à–µ–Ω–æ:** –ó–∞—Ö—ñ–¥ ev8 –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–æ –¥–ª—è —Ä–∏–∑–∏–∫—É t1.

---

## –ï–¢–ê–ü 4: –ú–û–ù–Ü–¢–û–†–ò–ù–ì –†–ò–ó–ò–ö–Ü–í

### 4.1. –û—Ü—ñ–Ω—é–≤–∞–Ω–Ω—è –ï—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –ó–∞—Ö–æ–¥—É

–ü—ñ—Å–ª—è –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è —Ç—Ä–µ–Ω—ñ–Ω–≥—É, –µ–∫—Å–ø–µ—Ä—Ç–∏ –Ω–∞–¥–∞—é—Ç—å **–Ω–æ–≤—ñ –æ—Ü—ñ–Ω–∫–∏**:

**–í—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ:**

```json
{
  "riskId": "t1",
  "newExpertProbabilities": [0.3, 0.4, 0.2, 0.5, 0.3, 0.4, 0.2, 0.4, 0.3, 0.4],
  "newExpertLosses": [0.3, 0.4, 0.2, 0.5, 0.3, 0.4, 0.2, 0.4, 0.3, 0.4],
  "expertWeights": [1.0, 1.2, 0.8, 1.5, 1.0, 1.2, 0.8, 1.2, 1.0, 1.2]
}
```

**–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –Ω–æ–≤–æ—ó –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ:**

```javascript
weightedSum = (0.3*1.0 + 0.4*1.2 + 0.2*0.8 + 0.5*1.5 + 0.3*1.0 + 
               0.4*1.2 + 0.2*0.8 + 0.4*1.2 + 0.3*1.0 + 0.4*1.2)

weightedSum = 0.3 + 0.48 + 0.16 + 0.75 + 0.3 + 0.48 + 0.16 + 0.48 + 0.3 + 0.48 = 3.89

eprer_t1^p = 3.89 / 10.9 = 0.3569
```

**–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –Ω–æ–≤–∏—Ö –∑–±–∏—Ç–∫—ñ–≤:**

```javascript
weightedSum = 0.3 + 0.48 + 0.16 + 0.75 + 0.3 + 0.48 + 0.16 + 0.48 + 0.3 + 0.48 = 3.89

elrer_t1^p = 3.89 / 10.9 = 0.3569
```

**–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –Ω–æ–≤–æ—ó –≤–µ–ª–∏—á–∏–Ω–∏ —Ä–∏–∑–∏–∫—É (—Ñ—É–Ω–∫—Ü—ñ—è `calculatePostMitigationRisk`):**

```javascript
evrer_t1^p = eprer_t1^p * elrer_t1^p = 0.3569 * 0.3569 = 0.1274
```

### 4.2. –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –î–û —Ç–∞ –ü–Ü–°–õ–Ø (—Ñ—É–Ω–∫—Ü—ñ—è `compareRisks`)

**–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –∑–º–µ–Ω—à–µ–Ω–Ω—è:**

```javascript
reduction = vrer_t1^p - evrer_t1^p = 0.3658 - 0.1274 = 0.2384

reductionPercentage = (0.2384 / 0.3658) * 100% = 65.17%
```

**API –∑–∞–ø–∏—Ç:**
```
POST /api/monitor-risk
Body: {–≤—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ –≤–∏—â–µ}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "riskId": "t1",
  "comparison": {
    "before": {
      "probability": 0.6569,
      "loss": 0.5569,
      "magnitude": 0.3658,
      "classification": "–í–∏—Å–æ–∫–∞"
    },
    "after": {
      "probability": 0.3569,
      "loss": 0.3569,
      "magnitude": 0.1274,
      "classification": "–°–µ—Ä–µ–¥–Ω—è"
    },
    "reduction": 0.2384,
    "reductionPercentage": 65.17,
    "improved": true
  },
  "mitigationMeasure": {
    "riskId": "t1",
    "measureId": "ev8",
    "measureName": "—Ç—Ä–µ–Ω—ñ–Ω–≥ –∑ –≤–∏–≤—á–µ–Ω–Ω—è —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–Ω—è"
  }
}
```

‚úÖ **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
- –ù–æ–≤–∞ –≤–µ–ª–∏—á–∏–Ω–∞: 0.3569 * 0.3569 = 0.1274 ‚úì
- –ó–º–µ–Ω—à–µ–Ω–Ω—è: 0.3658 - 0.1274 = 0.2384 ‚úì
- –í—ñ–¥—Å–æ—Ç–æ–∫: (0.2384 / 0.3658) * 100 = 65.17% ‚úì

‚úÖ **–ï—Ç–∞–ø 4 –∑–∞–≤–µ—Ä—à–µ–Ω–æ:** –ó–∞—Ö—ñ–¥ ev8 –∑–º–µ–Ω—à–∏–≤ —Ä–∏–∑–∏–∫ t1 –Ω–∞ 65.17%!

---

## –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –†–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

### –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –î–û/–ü–Ü–°–õ–Ø:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         –†–ò–ó–ò–ö t1 - –î–û –ó–ê–•–û–î–£                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –ô–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å:        0.6569 (–í–∏—Å–æ–∫–∞)         ‚îÇ
‚îÇ –ó–±–∏—Ç–∫–∏:            0.5569                   ‚îÇ
‚îÇ –í–µ–ª–∏—á–∏–Ω–∞ —Ä–∏–∑–∏–∫—É:   0.3658                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

                    ‚¨á –ó–∞—Å—Ç–æ—Å–æ–≤–∞–Ω–æ ev8 ‚¨á

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         –†–ò–ó–ò–ö t1 - –ü–Ü–°–õ–Ø –ó–ê–•–û–î–£             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –ô–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å:        0.3569 (–°–µ—Ä–µ–¥–Ω—è) ‚úÖ     ‚îÇ
‚îÇ –ó–±–∏—Ç–∫–∏:            0.3569             ‚úÖ     ‚îÇ
‚îÇ –í–µ–ª–∏—á–∏–Ω–∞ —Ä–∏–∑–∏–∫—É:   0.1274             ‚úÖ     ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ üìâ –ó–º–µ–Ω—à–µ–Ω–Ω—è: 0.2384 (65.17%)               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## –í–∏—Å–Ω–æ–≤–∫–∏

üéØ **–°–∏—Å—Ç–µ–º–∞ —É—Å–ø—ñ—à–Ω–æ –ø—Ä–æ–π—à–ª–∞ –≤—Å—ñ 4 –µ—Ç–∞–ø–∏ –¥–ª—è —Ä–∏–∑–∏–∫—É t1:**

1. ‚úÖ **–Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è:** –†–∏–∑–∏–∫ t1 –≤–∏—è–≤–ª–µ–Ω–æ —Ç–∞ –≤–∏–±—Ä–∞–Ω–æ –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É
2. ‚úÖ **–ê–Ω–∞–ª—ñ–∑:** –†–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–æ –≤–µ–ª–∏—á–∏–Ω—É —Ä–∏–∑–∏–∫—É (0.3658) –∑ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—î—é "–í–∏—Å–æ–∫–∞"
3. ‚úÖ **–ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è:** –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–æ –∑–∞—Ö—ñ–¥ ev8
4. ‚úÖ **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥:** –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ –∑–º–µ–Ω—à–µ–Ω–Ω—è —Ä–∏–∑–∏–∫—É –Ω–∞ 65.17%

üìä **–í—Å—ñ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–∏ –≤–∏–∫–æ–Ω–∞–Ω—ñ —Ç–æ—á–Ω–æ –∑–≥—ñ–¥–Ω–æ –∑ –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏–º–∏ —Ñ–æ—Ä–º—É–ª–∞–º–∏:**
- ‚úì –°–µ—Ä–µ–¥–Ω—å–æ–∑–≤–∞–∂–µ–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –∑ –≤–∞–≥–∞–º–∏ –µ–∫—Å–ø–µ—Ä—Ç—ñ–≤
- ‚úì –í–µ–ª–∏—á–∏–Ω–∞ —Ä–∏–∑–∏–∫—É —è–∫ –¥–æ–±—É—Ç–æ–∫ –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ —Ç–∞ –∑–±–∏—Ç–∫—ñ–≤
- ‚úì –ü—Ä—ñ–æ—Ä–∏—Ç–µ–∑–∞—Ü—ñ—è –∑–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º mpr
- ‚úì –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –¥–æ/–ø—ñ—Å–ª—è –∑ –≤—ñ–¥—Å–æ—Ç–∫–æ–º –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

üîç **–í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è:** –í—Å—ñ –ø—Ä–æ–º—ñ–∂–Ω—ñ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–∏ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω—ñ –≤—Ä—É—á–Ω—É —Ç–∞ —Å–ø—ñ–≤–ø–∞–¥–∞—é—Ç—å –∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Å–∏—Å—Ç–µ–º–∏.
